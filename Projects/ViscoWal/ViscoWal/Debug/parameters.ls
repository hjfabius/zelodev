   1                     ; C Compiler for ST7 (COSMIC Software)
   2                     ; Generator V4.5.5 - 12 Jan 2006
1280                     .const:	section	.text
1281  0000               L327_mc_byApplicationVersion:
1282  0000 da            	dc.b	218
1313                     	switch	.data
1314  0000               _m_byParamFirstTime:
1315  0000 ff            	dc.b	255
1316  0001               _m_byEepromAppIndex:
1317  0001 04            	dc.b	4
1318                     	switch	.const
1319  0001               L147_mc_arwoParameters:
1320  0001 0001          	dc.w	1
1321  0003 03e8          	dc.w	1000
1322  0005 0001          	dc.w	1
1323  0007 0000          	dc.w	0
1324  0009 0002          	dc.w	2
1325  000b 0000          	dc.w	0
1326  000d 0000          	dc.w	0
1327  000f 0000          	dc.w	0
1328  0011 00ff          	dc.w	255
1329  0013 00ff          	dc.w	255
1330  0015 0000          	dc.w	0
1331  0017 0000          	dc.w	0
1332  0019 0000          	dc.w	0
1333  001b 00ff          	dc.w	255
1334  001d 00ff          	dc.w	255
1335  001f 0000          	dc.w	0
1336  0021 0000          	dc.w	0
1337  0023 0000          	dc.w	0
1338  0025 00ff          	dc.w	255
1339  0027 00ff          	dc.w	255
1340  0029 0000          	dc.w	0
1341  002b 0000          	dc.w	0
1342  002d 0000          	dc.w	0
1343  002f 00ff          	dc.w	255
1344  0031 00ff          	dc.w	255
1345  0033 0000          	dc.w	0
1346  0035 0000          	dc.w	0
1347  0037 0000          	dc.w	0
1348  0039 00ff          	dc.w	255
1349  003b 00ff          	dc.w	255
1350  003d 0000          	dc.w	0
1351  003f 0000          	dc.w	0
1352  0041 0000          	dc.w	0
1353  0043 00ff          	dc.w	255
1354  0045 00ff          	dc.w	255
1355  0047 0000          	dc.w	0
1356  0049 0000          	dc.w	0
1357  004b 0000          	dc.w	0
1358  004d 00ff          	dc.w	255
1359  004f 00ff          	dc.w	255
1360  0051 0000          	dc.w	0
1361  0053 0000          	dc.w	0
1362  0055 0000          	dc.w	0
1363  0057 00ff          	dc.w	255
1364  0059 00ff          	dc.w	255
1365  005b 0000          	dc.w	0
1366  005d 0000          	dc.w	0
1367  005f 0000          	dc.w	0
1368  0061 00ff          	dc.w	255
1369  0063 00ff          	dc.w	255
1370  0065 0000          	dc.w	0
1371  0067 0000          	dc.w	0
1372  0069 0000          	dc.w	0
1373  006b 00ff          	dc.w	255
1374  006d 00ff          	dc.w	255
1375  006f 0001          	dc.w	1
1376  0071 03e7          	dc.w	999
1377  0073 0064          	dc.w	100
1378  0075 0001          	dc.w	1
1379  0077 0002          	dc.w	2
1380  0079 0001          	dc.w	1
1381  007b 03e7          	dc.w	999
1382  007d 0064          	dc.w	100
1383  007f 0002          	dc.w	2
1384  0081 0002          	dc.w	2
1385  0083 0000          	dc.w	0
1386  0085 0000          	dc.w	0
1387  0087 0000          	dc.w	0
1388  0089 00ff          	dc.w	255
1389  008b 00ff          	dc.w	255
1390  008d 0000          	dc.w	0
1391  008f 0000          	dc.w	0
1392  0091 0000          	dc.w	0
1393  0093 00ff          	dc.w	255
1394  0095 00ff          	dc.w	255
1395  0097 0000          	dc.w	0
1396  0099 00ff          	dc.w	255
1397  009b 0000          	dc.w	0
1398  009d 00ff          	dc.w	255
1399  009f 00ff          	dc.w	255
1400  00a1 0000          	dc.w	0
1401  00a3 00ff          	dc.w	255
1402  00a5 0000          	dc.w	0
1403  00a7 00ff          	dc.w	255
1404  00a9 0002          	dc.w	2
1405  00ab 0000          	dc.w	0
1406  00ad 00ff          	dc.w	255
1407  00af 0000          	dc.w	0
1408  00b1 00ff          	dc.w	255
1409  00b3 00ff          	dc.w	255
1410  00b5 0000          	dc.w	0
1411  00b7 0001          	dc.w	1
1412  00b9 0000          	dc.w	0
1413  00bb 00ff          	dc.w	255
1414  00bd 00ff          	dc.w	255
1415  00bf 0001          	dc.w	1
1416  00c1 fde8          	dc.w	-536
1417  00c3 07d0          	dc.w	2000
1418  00c5 0003          	dc.w	3
1419  00c7 0002          	dc.w	2
1420  00c9 0000          	dc.w	0
1421  00cb fde8          	dc.w	-536
1422  00cd 0000          	dc.w	0
1423  00cf 0004          	dc.w	4
1424  00d1 0002          	dc.w	2
1425  00d3 0001          	dc.w	1
1426  00d5 00b4          	dc.w	180
1427  00d7 000a          	dc.w	10
1428  00d9 00ff          	dc.w	255
1429  00db 0002          	dc.w	2
1430  00dd 0000          	dc.w	0
1431  00df fde8          	dc.w	-536
1432  00e1 0064          	dc.w	100
1433  00e3 00ff          	dc.w	255
1434  00e5 0002          	dc.w	2
1435  00e7 0000          	dc.w	0
1436  00e9 fde8          	dc.w	-536
1437  00eb 0000          	dc.w	0
1438  00ed 00ff          	dc.w	255
1439  00ef 0002          	dc.w	2
1440  00f1 0000          	dc.w	0
1441  00f3 fde8          	dc.w	-536
1442  00f5 0000          	dc.w	0
1443  00f7 00ff          	dc.w	255
1444  00f9 0002          	dc.w	2
1445  00fb 0001          	dc.w	1
1446  00fd 0020          	dc.w	32
1447  00ff 0002          	dc.w	2
1448  0101 00ff          	dc.w	255
1449  0103 0002          	dc.w	2
1450  0105 0000          	dc.w	0
1451  0107 fde8          	dc.w	-536
1452  0109 0064          	dc.w	100
1453  010b 00ff          	dc.w	255
1454  010d 0002          	dc.w	2
1455  010f 0000          	dc.w	0
1456  0111 fde8          	dc.w	-536
1457  0113 0000          	dc.w	0
1458  0115 00ff          	dc.w	255
1459  0117 0002          	dc.w	2
1460  0119 0000          	dc.w	0
1461  011b fde8          	dc.w	-536
1462  011d 0000          	dc.w	0
1463  011f 00ff          	dc.w	255
1464  0121 0002          	dc.w	2
1465  0123 0001          	dc.w	1
1466  0125 0020          	dc.w	32
1467  0127 0002          	dc.w	2
1468  0129 00ff          	dc.w	255
1469  012b 0002          	dc.w	2
1470  012d 0000          	dc.w	0
1471  012f 000a          	dc.w	10
1472  0131 0001          	dc.w	1
1473  0133 00ff          	dc.w	255
1474  0135 0002          	dc.w	2
1475  0137 0000          	dc.w	0
1476  0139 0005          	dc.w	5
1477  013b 0000          	dc.w	0
1478  013d 00ff          	dc.w	255
1479  013f 0002          	dc.w	2
1480  0141 0064          	dc.w	100
1481  0143 03e8          	dc.w	1000
1482  0145 0064          	dc.w	100
1483  0147 00ff          	dc.w	255
1484  0149 0002          	dc.w	2
1485  014b 0000          	dc.w	0
1486  014d 07d0          	dc.w	2000
1487  014f 001e          	dc.w	30
1488  0151 00ff          	dc.w	255
1489  0153 0002          	dc.w	2
1490  0155 0000          	dc.w	0
1491  0157 07d0          	dc.w	2000
1492  0159 00fa          	dc.w	250
1493  015b 00ff          	dc.w	255
1494  015d 0002          	dc.w	2
1495  015f 0000          	dc.w	0
1496  0161 0000          	dc.w	0
1497  0163 01f4          	dc.w	500
1498  0165 00ff          	dc.w	255
1499  0167 0002          	dc.w	2
1500  0169 0001          	dc.w	1
1501  016b 0064          	dc.w	100
1502  016d 0004          	dc.w	4
1503  016f 00ff          	dc.w	255
1504  0171 0002          	dc.w	2
1505  0173 0000          	dc.w	0
1506  0175 fde8          	dc.w	-536
1507  0177 003a          	dc.w	58
1508  0179 00ff          	dc.w	255
1509  017b 0002          	dc.w	2
1510  017d 0000          	dc.w	0
1511  017f fde8          	dc.w	-536
1512  0181 03ca          	dc.w	970
1513  0183 00ff          	dc.w	255
1514  0185 0002          	dc.w	2
1515  0187 0000          	dc.w	0
1516  0189 fde8          	dc.w	-536
1517  018b 0903          	dc.w	2307
1518  018d 00ff          	dc.w	255
1519  018f 0002          	dc.w	2
1520  0191 0000          	dc.w	0
1521  0193 fde8          	dc.w	-536
1522  0195 00a1          	dc.w	161
1523  0197 00ff          	dc.w	255
1524  0199 0002          	dc.w	2
1525  019b 0000          	dc.w	0
1526  019d fde8          	dc.w	-536
1527  019f 03e8          	dc.w	1000
1528  01a1 00ff          	dc.w	255
1529  01a3 0002          	dc.w	2
1530  01a5 0000          	dc.w	0
1531  01a7 0064          	dc.w	100
1532  01a9 0000          	dc.w	0
1533  01ab 00ff          	dc.w	255
1534  01ad 0002          	dc.w	2
1535  01af 0000          	dc.w	0
1536  01b1 0001          	dc.w	1
1537  01b3 0000          	dc.w	0
1538  01b5 00ff          	dc.w	255
1539  01b7 0002          	dc.w	2
1540  01b9 0000          	dc.w	0
1541  01bb 0001          	dc.w	1
1542  01bd 0000          	dc.w	0
1543  01bf 00ff          	dc.w	255
1544  01c1 0002          	dc.w	2
1545  01c3 0000          	dc.w	0
1546  01c5 fde8          	dc.w	-536
1547  01c7 03ca          	dc.w	970
1548  01c9 00ff          	dc.w	255
1549  01cb 0002          	dc.w	2
1583                     ; 72 void parametersInit(void)
1583                     ; 73 {	
1584                     	switch	.text
1585  0000               _parametersInit:
1588                     ; 75 	m_byEepromAppIndex = PARAM_IDX_EEPROM_APP_01;
1590  0000 a604          	ld	a,#4
1591  0002 c70001        	ld	_m_byEepromAppIndex,a
1592                     ; 78 	parametersLoadAll(true);
1594  0005 a601          	ld	a,#1
1595  0007 cd0293        	call	_parametersLoadAll
1597                     ; 80 	m_arwoParameters[PARAM_JOB] 				= (WORD)   1; //0 used for current job	
1599  000a a601          	ld	a,#1
1600  000c c7000d        	ld	_m_arwoParameters+1,a
1601  000f 4f            	clr	a
1602  0010 c7000c        	ld	_m_arwoParameters,a
1603                     ; 81 	parametersInitVisibleFlags();
1605  0013 cd00d9        	call	_parametersInitVisibleFlags
1607                     ; 83 	parametersChangedFlagReset(0xFF);
1609  0016 a6ff          	ld	a,#255
1610  0018 cd0109        	call	_parametersChangedFlagReset
1612                     ; 85 }
1615  001b 81            	ret
1652                     ; 89 WORD parametersGetSerialNumber(void)
1652                     ; 90 {
1653                     	switch	.text
1655                     	xref.b	_parametersGetSerialNumber$L
1656  001c               _parametersGetSerialNumber:
1659                     ; 94 	readEeprom(mc_arwoParameters[PARAM_MACHINE_SERIAL_NUMBER][PARAM_IDX_EEPROM_APP_01], PARAM_MACHINE_SERIAL_NUMBER*2, 2, (BYTE *) &woValue);
1661  001c aefe          	ld	x,#high(_parametersGetSerialNumber$L-2)
1662  001e bf05          	ld	_readEeprom$L+5,x
1663  0020 a6fe          	ld	a,#low(_parametersGetSerialNumber$L-2)
1664  0022 b706          	ld	_readEeprom$L+6,a
1665  0024 a602          	ld	a,#2
1666  0026 b704          	ld	_readEeprom$L+4,a
1667  0028 3f03          	clr	_readEeprom$L+3
1668  002a a640          	ld	a,#64
1669  002c b702          	ld	_readEeprom$L+2,a
1670  002e 3f01          	clr	_readEeprom$L+1
1671  0030 a602          	ld	a,#2
1672  0032 cd0000        	call	_readEeprom
1674                     ; 96 	parametersSet(PARAM_MACHINE_SERIAL_NUMBER, woValue);
1676  0035 befe          	ld	x,_parametersGetSerialNumber$L-2
1677  0037 bf01          	ld	_parametersSet$L+1,x
1678  0039 b6ff          	ld	a,_parametersGetSerialNumber$L-1
1679  003b b702          	ld	_parametersSet$L+2,a
1680  003d a620          	ld	a,#32
1681  003f cd0265        	call	_parametersSet
1683                     ; 98 	return woValue;
1685  0042 b6ff          	ld	a,_parametersGetSerialNumber$L-1
1686  0044 befe          	ld	x,_parametersGetSerialNumber$L-2
1689  0046 81            	ret
1733                     ; 102 BYTE parametersCheckBound(BYTE a_byParameterIndex, WORD a_woValue)
1733                     ; 103 {
1734                     	switch	.text
1736                     	xref.b	_parametersCheckBound$L
1737  0047               _parametersCheckBound:
1739  0047 b700          	ld	_parametersCheckBound$L,a
1741                     ; 104 	if( (mc_arwoParameters[a_byParameterIndex][PARAM_IDX_MIN] == 0x0000) &&
1741                     ; 105 		(mc_arwoParameters[a_byParameterIndex][PARAM_IDX_MAX] == 0x0000))
1743  0049 ae0a          	ld	x,#10
1744  004b 42            	mul	x,a
1745  004c ab01          	add	a,#low(L147_mc_arwoParameters)
1746  004e 88            	push	a
1747  004f 9f            	ld	a,x
1748  0050 a901          	adc	a,#high(L147_mc_arwoParameters)
1749  0052 97            	ld	x,a
1750  0053 84            	pop	a
1751  0054 bf00          	ld	c_x,x
1752  0056 97            	ld	x,a
1753  0057 cd0000        	call	c_getwx
1755  005a 4d            	tnz	a
1756  005b 2601          	jrne	L21
1757  005d 5d            	tnz	x
1758  005e               L21:
1759  005e 261c          	jrne	L1201
1761  0060 b600          	ld	a,_parametersCheckBound$L
1762  0062 ae0a          	ld	x,#10
1763  0064 42            	mul	x,a
1764  0065 ab03          	add	a,#low(L147_mc_arwoParameters+2)
1765  0067 88            	push	a
1766  0068 9f            	ld	a,x
1767  0069 a903          	adc	a,#high(L147_mc_arwoParameters+2)
1768  006b 97            	ld	x,a
1769  006c 84            	pop	a
1770  006d bf00          	ld	c_x,x
1771  006f 97            	ld	x,a
1772  0070 cd0000        	call	c_getwx
1774  0073 4d            	tnz	a
1775  0074 2601          	jrne	L41
1776  0076 5d            	tnz	x
1777  0077               L41:
1778  0077 2603          	jrne	L1201
1779                     ; 107 		return true;
1781  0079 a601          	ld	a,#1
1784  007b 81            	ret
1785  007c               L1201:
1786                     ; 110 	if(a_woValue<mc_arwoParameters[a_byParameterIndex][PARAM_IDX_MIN])
1788  007c b600          	ld	a,_parametersCheckBound$L
1789  007e ae0a          	ld	x,#10
1790  0080 42            	mul	x,a
1791  0081 ab01          	add	a,#low(L147_mc_arwoParameters)
1792  0083 88            	push	a
1793  0084 9f            	ld	a,x
1794  0085 a901          	adc	a,#high(L147_mc_arwoParameters)
1795  0087 97            	ld	x,a
1796  0088 84            	pop	a
1797  0089 bf00          	ld	c_x,x
1798  008b 97            	ld	x,a
1799  008c cd0000        	call	c_getwx
1801  008f 99            	scf
1802  0090 b202          	sbc	a,_parametersCheckBound$L+2
1803  0092 9f            	ld	a,x
1804  0093 b201          	sbc	a,_parametersCheckBound$L+1
1805  0095 2502          	jrult	L3201
1806                     ; 112 		return false;
1808  0097 4f            	clr	a
1811  0098 81            	ret
1812  0099               L3201:
1813                     ; 115 	if(a_woValue>mc_arwoParameters[a_byParameterIndex][PARAM_IDX_MAX])
1815  0099 b600          	ld	a,_parametersCheckBound$L
1816  009b ae0a          	ld	x,#10
1817  009d 42            	mul	x,a
1818  009e ab03          	add	a,#low(L147_mc_arwoParameters+2)
1819  00a0 88            	push	a
1820  00a1 9f            	ld	a,x
1821  00a2 a903          	adc	a,#high(L147_mc_arwoParameters+2)
1822  00a4 97            	ld	x,a
1823  00a5 84            	pop	a
1824  00a6 bf00          	ld	c_x,x
1825  00a8 97            	ld	x,a
1826  00a9 cd0000        	call	c_getwx
1828  00ac b002          	sub	a,_parametersCheckBound$L+2
1829  00ae 9f            	ld	a,x
1830  00af b201          	sbc	a,_parametersCheckBound$L+1
1831  00b1 2402          	jruge	L5201
1832                     ; 117 		return false;
1834  00b3 4f            	clr	a
1837  00b4 81            	ret
1838  00b5               L5201:
1839                     ; 120 	return true;
1841  00b5 a601          	ld	a,#1
1844  00b7 81            	ret
1880                     ; 124 void parametersInitVisibleFlagsSimple(void)
1880                     ; 125 {
1881                     	switch	.text
1883                     	xref.b	_parametersInitVisibleFlagsSimple$L
1884  00b8               _parametersInitVisibleFlagsSimple:
1887                     ; 127 	for(i=0; i<(PARAMETER_NUMBER/8)+1; i++)
1889  00b8 3fff          	clr	_parametersInitVisibleFlagsSimple$L-1
1890  00ba               L5401:
1891                     ; 129 		m_arbyParameterVisibleFlag[i] = 0x00;
1893  00ba beff          	ld	x,_parametersInitVisibleFlagsSimple$L-1
1894  00bc 4f            	clr	a
1895  00bd d70000        	ld	(_m_arbyParameterVisibleFlag,x),a
1896                     ; 127 	for(i=0; i<(PARAMETER_NUMBER/8)+1; i++)
1898  00c0 3cff          	inc	_parametersInitVisibleFlagsSimple$L-1
1901  00c2 b6ff          	ld	a,_parametersInitVisibleFlagsSimple$L-1
1902  00c4 a106          	cp	a,#6
1903  00c6 25f2          	jrult	L5401
1904                     ; 132 	parametersVisibleFlagSet(PARAM_VISCOSITY_GAIN);
1906  00c8 a613          	ld	a,#19
1907  00ca ad1f          	call	_parametersVisibleFlagSet
1909                     ; 135 	parametersVisibleFlagSet(PARAM_VISCOSITY_DEAD_ZONE);
1911  00cc a614          	ld	a,#20
1912  00ce ad1b          	call	_parametersVisibleFlagSet
1914                     ; 136 	parametersVisibleFlagSet(PARAM_INTERMEASURE);
1916  00d0 a615          	ld	a,#21
1917  00d2 ad17          	call	_parametersVisibleFlagSet
1919                     ; 137 	parametersVisibleFlagSet(PARAM_LANGUAGE);
1921  00d4 a61f          	ld	a,#31
1922  00d6 ad13          	call	_parametersVisibleFlagSet
1924                     ; 147 }
1927  00d8 81            	ret
1962                     ; 150 void parametersInitVisibleFlags(void)
1962                     ; 151 {
1963                     	switch	.text
1965                     	xref.b	_parametersInitVisibleFlags$L
1966  00d9               _parametersInitVisibleFlags:
1969                     ; 153 	for(i=0; i<(PARAMETER_NUMBER/8)+1; i++)
1971  00d9 3fff          	clr	_parametersInitVisibleFlags$L-1
1972  00db               L1701:
1973                     ; 155 		m_arbyParameterVisibleFlag[i] = 0xFF;
1975  00db beff          	ld	x,_parametersInitVisibleFlags$L-1
1976  00dd a6ff          	ld	a,#255
1977  00df d70000        	ld	(_m_arbyParameterVisibleFlag,x),a
1978                     ; 153 	for(i=0; i<(PARAMETER_NUMBER/8)+1; i++)
1980  00e2 3cff          	inc	_parametersInitVisibleFlags$L-1
1983  00e4 b6ff          	ld	a,_parametersInitVisibleFlags$L-1
1984  00e6 a106          	cp	a,#6
1985  00e8 25f1          	jrult	L1701
1986                     ; 158 }
1989  00ea 81            	ret
2024                     ; 163 void parametersVisibleFlagSet(BYTE a_byParameterIndex)
2024                     ; 164 {
2025                     	switch	.text
2027                     	xref.b	_parametersVisibleFlagSet$L
2028  00eb               _parametersVisibleFlagSet:
2030  00eb b700          	ld	_parametersVisibleFlagSet$L,a
2032                     ; 165 	_bset(m_arbyParameterVisibleFlag[a_byParameterIndex/8], a_byParameterIndex & 0b00000111);		
2034  00ed 97            	ld	x,a
2035  00ee 54            	srl	x
2036  00ef 54            	srl	x
2037  00f0 54            	srl	x
2038  00f1 b600          	ld	a,_parametersVisibleFlagSet$L
2039  00f3 a407          	and	a,#7
2040  00f5 9097          	ld	y,a
2041  00f7 a601          	ld	a,#1
2042  00f9 905d          	tnz	y
2043  00fb 2705          	jreq	L42
2044  00fd               L62:
2045  00fd 48            	sll	a
2046  00fe 905a          	dec	y
2047  0100 26fb          	jrne	L62
2048  0102               L42:
2049  0102 da0000        	or	a,(_m_arbyParameterVisibleFlag,x)
2050  0105 d70000        	ld	(_m_arbyParameterVisibleFlag,x),a
2051                     ; 166 }
2054  0108 81            	ret
2098                     ; 169 void parametersChangedFlagReset(BYTE a_byParameterIndex)
2098                     ; 170 {
2099                     	switch	.text
2101                     	xref.b	_parametersChangedFlagReset$L
2102  0109               _parametersChangedFlagReset:
2104  0109 b700          	ld	_parametersChangedFlagReset$L,a
2106                     ; 172 	if (a_byParameterIndex == 0xFF)
2108  010b a1ff          	cp	a,#255
2109  010d 2612          	jrne	L7311
2110                     ; 174 		for(i=0; i<(PARAMETER_NUMBER/8)+1; i++)
2112  010f 3fff          	clr	_parametersChangedFlagReset$L-1
2113  0111               L1411:
2114                     ; 176 			m_arbyParameterChangedFlag[i] = 0x00;
2116  0111 beff          	ld	x,_parametersChangedFlagReset$L-1
2117  0113 4f            	clr	a
2118  0114 d70006        	ld	(_m_arbyParameterChangedFlag,x),a
2119                     ; 174 		for(i=0; i<(PARAMETER_NUMBER/8)+1; i++)
2121  0117 3cff          	inc	_parametersChangedFlagReset$L-1
2124  0119 b6ff          	ld	a,_parametersChangedFlagReset$L-1
2125  011b a106          	cp	a,#6
2126  011d 25f2          	jrult	L1411
2128  011f 201d          	jra	L7411
2129  0121               L7311:
2130                     ; 181 		_bres(m_arbyParameterChangedFlag[a_byParameterIndex/8], a_byParameterIndex & 0b00000111);		
2132  0121 be00          	ld	x,_parametersChangedFlagReset$L
2133  0123 54            	srl	x
2134  0124 54            	srl	x
2135  0125 54            	srl	x
2136  0126 b600          	ld	a,_parametersChangedFlagReset$L
2137  0128 a407          	and	a,#7
2138  012a 9097          	ld	y,a
2139  012c a601          	ld	a,#1
2140  012e 905d          	tnz	y
2141  0130 2705          	jreq	L23
2142  0132               L43:
2143  0132 48            	sll	a
2144  0133 905a          	dec	y
2145  0135 26fb          	jrne	L43
2146  0137               L23:
2147  0137 43            	cpl	a
2148  0138 d40006        	and	a,(_m_arbyParameterChangedFlag,x)
2149  013b d70006        	ld	(_m_arbyParameterChangedFlag,x),a
2150  013e               L7411:
2151                     ; 183 }
2154  013e 81            	ret
2189                     ; 186 BYTE parametersIsChanged(BYTE a_byParameterIndex)
2189                     ; 187 {
2190                     	switch	.text
2192                     	xref.b	_parametersIsChanged$L
2193  013f               _parametersIsChanged:
2195  013f b700          	ld	_parametersIsChanged$L,a
2197                     ; 188 	return (BYTE)(_btst(m_arbyParameterChangedFlag[a_byParameterIndex/8], a_byParameterIndex & 0b00000111)!=0);
2199  0141 97            	ld	x,a
2200  0142 54            	srl	x
2201  0143 54            	srl	x
2202  0144 54            	srl	x
2203  0145 d60006        	ld	a,(_m_arbyParameterChangedFlag,x)
2204  0148 5f            	clr	x
2205  0149 b7ff          	ld	_parametersIsChanged$L-1,a
2206  014b bffe          	ld	_parametersIsChanged$L-2,x
2207  014d 5f            	clr	x
2208  014e a601          	ld	a,#1
2209  0150 88            	push	a
2210  0151 89            	push	x
2211  0152 b600          	ld	a,_parametersIsChanged$L
2212  0154 a407          	and	a,#7
2213  0156 9097          	ld	y,a
2214  0158 85            	pop	x
2215  0159 84            	pop	a
2216  015a 905d          	tnz	y
2217  015c 2706          	jreq	L24
2218  015e               L44:
2219  015e 48            	sll	a
2220  015f 59            	rlc	x
2221  0160 905a          	dec	y
2222  0162 26fa          	jrne	L44
2223  0164               L24:
2224  0164 b4ff          	and	a,_parametersIsChanged$L-1
2225  0166 88            	push	a
2226  0167 9f            	ld	a,x
2227  0168 b4fe          	and	a,_parametersIsChanged$L-2
2228  016a 97            	ld	x,a
2229  016b 84            	pop	a
2230  016c 4d            	tnz	a
2231  016d 2601          	jrne	L64
2232  016f 5d            	tnz	x
2233  0170               L64:
2234  0170 2704          	jreq	L04
2235  0172 a601          	ld	a,#1
2236  0174 2001          	jra	L05
2237  0176               L04:
2238  0176 4f            	clr	a
2239  0177               L05:
2242  0177 81            	ret
2277                     ; 192 void parametersForceChangedFlag(BYTE a_byParameterIndex)
2277                     ; 193 {
2278                     	switch	.text
2280                     	xref.b	_parametersForceChangedFlag$L
2281  0178               _parametersForceChangedFlag:
2283  0178 b700          	ld	_parametersForceChangedFlag$L,a
2285                     ; 194 	_bset(m_arbyParameterChangedFlag[a_byParameterIndex/8], a_byParameterIndex & 0b00000111);		
2287  017a 97            	ld	x,a
2288  017b 54            	srl	x
2289  017c 54            	srl	x
2290  017d 54            	srl	x
2291  017e b600          	ld	a,_parametersForceChangedFlag$L
2292  0180 a407          	and	a,#7
2293  0182 9097          	ld	y,a
2294  0184 a601          	ld	a,#1
2295  0186 905d          	tnz	y
2296  0188 2705          	jreq	L45
2297  018a               L65:
2298  018a 48            	sll	a
2299  018b 905a          	dec	y
2300  018d 26fb          	jrne	L65
2301  018f               L45:
2302  018f da0006        	or	a,(_m_arbyParameterChangedFlag,x)
2303  0192 d70006        	ld	(_m_arbyParameterChangedFlag,x),a
2304                     ; 195 }
2307  0195 81            	ret
2350                     ; 199 WORD parametersGetValue(BYTE a_byParameterIndex)
2350                     ; 200 {
2351                     	switch	.text
2353                     	xref.b	_parametersGetValue$L
2354  0196               _parametersGetValue:
2356  0196 b700          	ld	_parametersGetValue$L,a
2358                     ; 201 	WORD woValue = 0x0000;
2360  0198 3ffe          	clr	_parametersGetValue$L-2
2361  019a 3fff          	clr	_parametersGetValue$L-1
2362                     ; 202 	parametersGet(a_byParameterIndex, &woValue);
2364  019c aefe          	ld	x,#high(_parametersGetValue$L-2)
2365  019e bf01          	ld	_parametersGet$L+1,x
2366  01a0 a6fe          	ld	a,#low(_parametersGetValue$L-2)
2367  01a2 b702          	ld	_parametersGet$L+2,a
2368  01a4 b600          	ld	a,_parametersGetValue$L
2369  01a6 ad05          	call	_parametersGet
2371                     ; 203 	return woValue;
2373  01a8 b6ff          	ld	a,_parametersGetValue$L-1
2374  01aa befe          	ld	x,_parametersGetValue$L-2
2377  01ac 81            	ret
2421                     ; 207 void parametersGet(BYTE a_byParameterIndex, WORD * a_woValue)
2421                     ; 208 {
2422                     	switch	.text
2424                     	xref.b	_parametersGet$L
2425  01ad               _parametersGet:
2428                     ; 209 	*a_woValue = (WORD) m_arwoParameters[a_byParameterIndex];
2430  01ad 97            	ld	x,a
2431  01ae 58            	sll	x
2432  01af d6000d        	ld	a,(_m_arwoParameters+1,x)
2433  01b2 de000c        	ld	x,(_m_arwoParameters,x)
2434  01b5 90be01        	ld	y,_parametersGet$L+1
2435  01b8 90bf00        	ld	c_y,y
2436  01bb 90be02        	ld	y,_parametersGet$L+2
2437  01be cd0000        	call	c_putw
2439                     ; 210 }
2442  01c1 81            	ret
2491                     ; 214 BYTE parametersSetForced(BYTE a_byParameterIndex, WORD a_woValue)
2491                     ; 215 {
2492                     	switch	.text
2494                     	xref.b	_parametersSetForced$L
2495  01c2               _parametersSetForced:
2497  01c2 b700          	ld	_parametersSetForced$L,a
2499                     ; 216 	if (parametersCheckBound(a_byParameterIndex, a_woValue))
2501  01c4 be01          	ld	x,_parametersSetForced$L+1
2502  01c6 bf01          	ld	_parametersCheckBound$L+1,x
2503  01c8 b602          	ld	a,_parametersSetForced$L+2
2504  01ca b702          	ld	_parametersCheckBound$L+2,a
2505  01cc b600          	ld	a,_parametersSetForced$L
2506  01ce cd0047        	call	_parametersCheckBound
2508  01d1 4d            	tnz	a
2509  01d2 2603          	jrne	L001
2510  01d4 cc0263        	jp	L3721
2511  01d7               L001:
2512                     ; 218 		m_arwoParameters[a_byParameterIndex] = a_woValue;
2514  01d7 be00          	ld	x,_parametersSetForced$L
2515  01d9 58            	sll	x
2516  01da b601          	ld	a,_parametersSetForced$L+1
2517  01dc d7000c        	ld	(_m_arwoParameters,x),a
2518  01df b602          	ld	a,_parametersSetForced$L+2
2519  01e1 d7000d        	ld	(_m_arwoParameters+1,x),a
2520                     ; 219 		_bset(m_arbyParameterChangedFlag[a_byParameterIndex/8], a_byParameterIndex & 0b00000111);	
2522  01e4 be00          	ld	x,_parametersSetForced$L
2523  01e6 54            	srl	x
2524  01e7 54            	srl	x
2525  01e8 54            	srl	x
2526  01e9 b600          	ld	a,_parametersSetForced$L
2527  01eb a407          	and	a,#7
2528  01ed 9097          	ld	y,a
2529  01ef a601          	ld	a,#1
2530  01f1 905d          	tnz	y
2531  01f3 2705          	jreq	L66
2532  01f5               L07:
2533  01f5 48            	sll	a
2534  01f6 905a          	dec	y
2535  01f8 26fb          	jrne	L07
2536  01fa               L66:
2537  01fa da0006        	or	a,(_m_arbyParameterChangedFlag,x)
2538  01fd d70006        	ld	(_m_arbyParameterChangedFlag,x),a
2539                     ; 221 		if (mc_arwoParameters[a_byParameterIndex][m_byEepromAppIndex]!=EEPROM_ADR_NONE)
2541  0200 c60001        	ld	a,_m_byEepromAppIndex
2542  0203 48            	sll	a
2543  0204 b7ff          	ld	_parametersSetForced$L-1,a
2544  0206 b600          	ld	a,_parametersSetForced$L
2545  0208 ae0a          	ld	x,#10
2546  020a 42            	mul	x,a
2547  020b bbff          	add	a,_parametersSetForced$L-1
2548  020d 2401          	jrnc	L27
2549  020f 5c            	inc	x
2550  0210               L27:
2551  0210 ab01          	add	a,#low(L147_mc_arwoParameters)
2552  0212 88            	push	a
2553  0213 9f            	ld	a,x
2554  0214 a901          	adc	a,#high(L147_mc_arwoParameters)
2555  0216 97            	ld	x,a
2556  0217 84            	pop	a
2557  0218 bf00          	ld	c_x,x
2558  021a 97            	ld	x,a
2559  021b cd0000        	call	c_getwx
2561  021e a1ff          	cp	a,#255
2562  0220 2602          	jrne	L47
2563  0222 a300          	cp	x,#0
2564  0224               L47:
2565  0224 273a          	jreq	L5721
2566                     ; 223 			writeEeprom(mc_arwoParameters[a_byParameterIndex][m_byEepromAppIndex], a_byParameterIndex*2, 2, (BYTE *) &a_woValue);
2568  0226 ae01          	ld	x,#high(_parametersSetForced$L+1)
2569  0228 bf05          	ld	_writeEeprom$L+5,x
2570  022a a601          	ld	a,#low(_parametersSetForced$L+1)
2571  022c b706          	ld	_writeEeprom$L+6,a
2572  022e a602          	ld	a,#2
2573  0230 b704          	ld	_writeEeprom$L+4,a
2574  0232 3f03          	clr	_writeEeprom$L+3
2575  0234 b600          	ld	a,_parametersSetForced$L
2576  0236 5f            	clr	x
2577  0237 48            	sll	a
2578  0238 59            	rlc	x
2579  0239 b702          	ld	_writeEeprom$L+2,a
2580  023b bf01          	ld	_writeEeprom$L+1,x
2581  023d c60001        	ld	a,_m_byEepromAppIndex
2582  0240 48            	sll	a
2583  0241 b7ff          	ld	_parametersSetForced$L-1,a
2584  0243 b600          	ld	a,_parametersSetForced$L
2585  0245 ae0a          	ld	x,#10
2586  0247 42            	mul	x,a
2587  0248 bbff          	add	a,_parametersSetForced$L-1
2588  024a 2401          	jrnc	L67
2589  024c 5c            	inc	x
2590  024d               L67:
2591  024d ab02          	add	a,#low(L147_mc_arwoParameters+1)
2592  024f 88            	push	a
2593  0250 9f            	ld	a,x
2594  0251 a902          	adc	a,#high(L147_mc_arwoParameters+1)
2595  0253 97            	ld	x,a
2596  0254 84            	pop	a
2597  0255 bf00          	ld	c_x,x
2598  0257 97            	ld	x,a
2599  0258 bf01          	ld	c_x+1,x
2600  025a 92c600        	ld	a,[c_x.w]
2601  025d cd0000        	call	_writeEeprom
2603  0260               L5721:
2604                     ; 226 		return true;
2606  0260 a601          	ld	a,#1
2609  0262 81            	ret
2610  0263               L3721:
2611                     ; 230 		return false;
2613  0263 4f            	clr	a
2616  0264 81            	ret
2670                     ; 236 BYTE parametersSet(BYTE a_byParameterIndex, WORD a_woValue)
2670                     ; 237 {
2671                     	switch	.text
2673                     	xref.b	_parametersSet$L
2674  0265               _parametersSet:
2676  0265 b700          	ld	_parametersSet$L,a
2678                     ; 238 	BYTE byAcceptable	= true;
2680  0267 a601          	ld	a,#1
2681  0269 b7ff          	ld	_parametersSet$L-1,a
2682                     ; 240 	if (m_arwoParameters[a_byParameterIndex] != a_woValue)
2684  026b be00          	ld	x,_parametersSet$L
2685  026d 58            	sll	x
2686  026e d6000d        	ld	a,(_m_arwoParameters+1,x)
2687  0271 b102          	cp	a,_parametersSet$L+2
2688  0273 2605          	jrne	L401
2689  0275 d6000c        	ld	a,(_m_arwoParameters,x)
2690  0278 b101          	cp	a,_parametersSet$L+1
2691  027a               L401:
2692  027a 270f          	jreq	L7231
2693                     ; 242 		byAcceptable = parametersSetForced(a_byParameterIndex, a_woValue);
2695  027c be01          	ld	x,_parametersSet$L+1
2696  027e bf01          	ld	_parametersSetForced$L+1,x
2697  0280 b602          	ld	a,_parametersSet$L+2
2698  0282 b702          	ld	_parametersSetForced$L+2,a
2699  0284 b600          	ld	a,_parametersSet$L
2700  0286 cd01c2        	call	_parametersSetForced
2702  0289 b7ff          	ld	_parametersSet$L-1,a
2703  028b               L7231:
2704                     ; 245 	m_byEepromAppIndex = PARAM_IDX_EEPROM_APP_01;
2706  028b a604          	ld	a,#4
2707  028d c70001        	ld	_m_byEepromAppIndex,a
2708                     ; 247 	return byAcceptable;
2710  0290 b6ff          	ld	a,_parametersSet$L-1
2713  0292 81            	ret
2770                     ; 251 void parametersLoadAll(BYTE a_byWithDefault)
2770                     ; 252 {
2771                     	switch	.text
2773                     	xref.b	_parametersLoadAll$L
2774  0293               _parametersLoadAll:
2776  0293 b700          	ld	_parametersLoadAll$L,a
2778                     ; 253 	BYTE byIndex	= PARAMETER_NUMBER;
2780  0295 a62e          	ld	a,#46
2781  0297 b7ff          	ld	_parametersLoadAll$L-1,a
2783  0299 cc035b        	jp	L3631
2784  029c               L7531:
2785                     ; 259 		if (mc_arwoParameters[byIndex][m_byEepromAppIndex]!=EEPROM_ADR_NONE)
2787  029c c60001        	ld	a,_m_byEepromAppIndex
2788  029f 48            	sll	a
2789  02a0 b7fc          	ld	_parametersLoadAll$L-4,a
2790  02a2 b6ff          	ld	a,_parametersLoadAll$L-1
2791  02a4 ae0a          	ld	x,#10
2792  02a6 42            	mul	x,a
2793  02a7 bbfc          	add	a,_parametersLoadAll$L-4
2794  02a9 2401          	jrnc	L011
2795  02ab 5c            	inc	x
2796  02ac               L011:
2797  02ac ab01          	add	a,#low(L147_mc_arwoParameters)
2798  02ae 88            	push	a
2799  02af 9f            	ld	a,x
2800  02b0 a901          	adc	a,#high(L147_mc_arwoParameters)
2801  02b2 97            	ld	x,a
2802  02b3 84            	pop	a
2803  02b4 bf00          	ld	c_x,x
2804  02b6 97            	ld	x,a
2805  02b7 cd0000        	call	c_getwx
2807  02ba a1ff          	cp	a,#255
2808  02bc 2602          	jrne	L211
2809  02be a300          	cp	x,#0
2810  02c0               L211:
2811  02c0 273c          	jreq	L7631
2812                     ; 261 			readEeprom(mc_arwoParameters[byIndex][m_byEepromAppIndex], byIndex*2, 2, (BYTE *) &woValue);
2814  02c2 aefd          	ld	x,#high(_parametersLoadAll$L-3)
2815  02c4 bf05          	ld	_readEeprom$L+5,x
2816  02c6 a6fd          	ld	a,#low(_parametersLoadAll$L-3)
2817  02c8 b706          	ld	_readEeprom$L+6,a
2818  02ca a602          	ld	a,#2
2819  02cc b704          	ld	_readEeprom$L+4,a
2820  02ce 3f03          	clr	_readEeprom$L+3
2821  02d0 b6ff          	ld	a,_parametersLoadAll$L-1
2822  02d2 5f            	clr	x
2823  02d3 48            	sll	a
2824  02d4 59            	rlc	x
2825  02d5 b702          	ld	_readEeprom$L+2,a
2826  02d7 bf01          	ld	_readEeprom$L+1,x
2827  02d9 c60001        	ld	a,_m_byEepromAppIndex
2828  02dc 48            	sll	a
2829  02dd b7fc          	ld	_parametersLoadAll$L-4,a
2830  02df b6ff          	ld	a,_parametersLoadAll$L-1
2831  02e1 ae0a          	ld	x,#10
2832  02e3 42            	mul	x,a
2833  02e4 bbfc          	add	a,_parametersLoadAll$L-4
2834  02e6 2401          	jrnc	L411
2835  02e8 5c            	inc	x
2836  02e9               L411:
2837  02e9 ab02          	add	a,#low(L147_mc_arwoParameters+1)
2838  02eb 88            	push	a
2839  02ec 9f            	ld	a,x
2840  02ed a902          	adc	a,#high(L147_mc_arwoParameters+1)
2841  02ef 97            	ld	x,a
2842  02f0 84            	pop	a
2843  02f1 bf00          	ld	c_x,x
2844  02f3 97            	ld	x,a
2845  02f4 bf01          	ld	c_x+1,x
2846  02f6 92c600        	ld	a,[c_x.w]
2847  02f9 cd0000        	call	_readEeprom
2850  02fc 201b          	jra	L1731
2851  02fe               L7631:
2852                     ; 263 		else if (a_byWithDefault)
2854  02fe 3d00          	tnz	_parametersLoadAll$L
2855  0300 2717          	jreq	L1731
2856                     ; 265 			woValue = mc_arwoParameters[byIndex][PARAM_IDX_DEFAULT];
2858  0302 b6ff          	ld	a,_parametersLoadAll$L-1
2859  0304 ae0a          	ld	x,#10
2860  0306 42            	mul	x,a
2861  0307 ab05          	add	a,#low(L147_mc_arwoParameters+4)
2862  0309 88            	push	a
2863  030a 9f            	ld	a,x
2864  030b a905          	adc	a,#high(L147_mc_arwoParameters+4)
2865  030d 97            	ld	x,a
2866  030e 84            	pop	a
2867  030f bf00          	ld	c_x,x
2868  0311 97            	ld	x,a
2869  0312 cd0000        	call	c_getwx
2871  0315 b7fe          	ld	_parametersLoadAll$L-2,a
2872  0317 bffd          	ld	_parametersLoadAll$L-3,x
2873  0319               L1731:
2874                     ; 268 		if(a_byWithDefault)
2876  0319 3d00          	tnz	_parametersLoadAll$L
2877  031b 273e          	jreq	L3631
2878                     ; 270 			m_arwoParameters[byIndex] = 0xFFFF;  //In order to force to resend all the parameter to Z80
2880  031d beff          	ld	x,_parametersLoadAll$L-1
2881  031f 58            	sll	x
2882  0320 a6ff          	ld	a,#255
2883  0322 d7000c        	ld	(_m_arwoParameters,x),a
2884  0325 a6ff          	ld	a,#255
2885  0327 d7000d        	ld	(_m_arwoParameters+1,x),a
2886                     ; 271 			if(!parametersSetForced(byIndex, woValue))
2888  032a befd          	ld	x,_parametersLoadAll$L-3
2889  032c bf01          	ld	_parametersSetForced$L+1,x
2890  032e b6fe          	ld	a,_parametersLoadAll$L-2
2891  0330 b702          	ld	_parametersSetForced$L+2,a
2892  0332 b6ff          	ld	a,_parametersLoadAll$L-1
2893  0334 cd01c2        	call	_parametersSetForced
2895  0337 4d            	tnz	a
2896  0338 261c          	jrne	L7731
2897                     ; 273 				parametersSetForced(byIndex, mc_arwoParameters[byIndex][PARAM_IDX_DEFAULT]);
2899  033a b6ff          	ld	a,_parametersLoadAll$L-1
2900  033c ae0a          	ld	x,#10
2901  033e 42            	mul	x,a
2902  033f ab05          	add	a,#low(L147_mc_arwoParameters+4)
2903  0341 88            	push	a
2904  0342 9f            	ld	a,x
2905  0343 a905          	adc	a,#high(L147_mc_arwoParameters+4)
2906  0345 97            	ld	x,a
2907  0346 84            	pop	a
2908  0347 bf00          	ld	c_x,x
2909  0349 97            	ld	x,a
2910  034a cd0000        	call	c_getwx
2912  034d b702          	ld	_parametersSetForced$L+2,a
2913  034f bf01          	ld	_parametersSetForced$L+1,x
2914  0351 b6ff          	ld	a,_parametersLoadAll$L-1
2915  0353 cd01c2        	call	_parametersSetForced
2917  0356               L7731:
2918                     ; 275 			parametersChangedFlagReset(byIndex);
2920  0356 b6ff          	ld	a,_parametersLoadAll$L-1
2921  0358 cd0109        	call	_parametersChangedFlagReset
2923  035b               L3631:
2924                     ; 256 	while(byIndex-->0)
2926  035b b6ff          	ld	a,_parametersLoadAll$L-1
2927  035d 3aff          	dec	_parametersLoadAll$L-1
2928  035f 4d            	tnz	a
2929  0360 2703          	jreq	L611
2930  0362 cc029c        	jp	L7531
2931  0365               L611:
2932                     ; 278 }
2935  0365 81            	ret
2981                     ; 281 void parametersSaveAll(void)
2981                     ; 282 {
2982                     	switch	.text
2984                     	xref.b	_parametersSaveAll$L
2985  0366               _parametersSaveAll:
2988                     ; 283 	BYTE byIndex	= PARAMETER_NUMBER;
2990  0366 a62e          	ld	a,#46
2991  0368 b7ff          	ld	_parametersSaveAll$L-1,a
2993  036a 2069          	jra	L7241
2994  036c               L3241:
2995                     ; 288 		if (mc_arwoParameters[byIndex][m_byEepromAppIndex]!=EEPROM_ADR_NONE)
2997  036c c60001        	ld	a,_m_byEepromAppIndex
2998  036f 48            	sll	a
2999  0370 b7fc          	ld	_parametersSaveAll$L-4,a
3000  0372 b6ff          	ld	a,_parametersSaveAll$L-1
3001  0374 ae0a          	ld	x,#10
3002  0376 42            	mul	x,a
3003  0377 bbfc          	add	a,_parametersSaveAll$L-4
3004  0379 2401          	jrnc	L221
3005  037b 5c            	inc	x
3006  037c               L221:
3007  037c ab01          	add	a,#low(L147_mc_arwoParameters)
3008  037e 88            	push	a
3009  037f 9f            	ld	a,x
3010  0380 a901          	adc	a,#high(L147_mc_arwoParameters)
3011  0382 97            	ld	x,a
3012  0383 84            	pop	a
3013  0384 bf00          	ld	c_x,x
3014  0386 97            	ld	x,a
3015  0387 cd0000        	call	c_getwx
3017  038a a1ff          	cp	a,#255
3018  038c 2602          	jrne	L421
3019  038e a300          	cp	x,#0
3020  0390               L421:
3021  0390 2743          	jreq	L7241
3022                     ; 290 			woValue = parametersGetValue(byIndex);
3024  0392 b6ff          	ld	a,_parametersSaveAll$L-1
3025  0394 cd0196        	call	_parametersGetValue
3027  0397 b7fe          	ld	_parametersSaveAll$L-2,a
3028  0399 bffd          	ld	_parametersSaveAll$L-3,x
3029                     ; 291 			writeEeprom(mc_arwoParameters[byIndex][m_byEepromAppIndex], byIndex*2, 2, (BYTE *) &woValue);
3031  039b aefd          	ld	x,#high(_parametersSaveAll$L-3)
3032  039d bf05          	ld	_writeEeprom$L+5,x
3033  039f a6fd          	ld	a,#low(_parametersSaveAll$L-3)
3034  03a1 b706          	ld	_writeEeprom$L+6,a
3035  03a3 a602          	ld	a,#2
3036  03a5 b704          	ld	_writeEeprom$L+4,a
3037  03a7 3f03          	clr	_writeEeprom$L+3
3038  03a9 b6ff          	ld	a,_parametersSaveAll$L-1
3039  03ab 5f            	clr	x
3040  03ac 48            	sll	a
3041  03ad 59            	rlc	x
3042  03ae b702          	ld	_writeEeprom$L+2,a
3043  03b0 bf01          	ld	_writeEeprom$L+1,x
3044  03b2 c60001        	ld	a,_m_byEepromAppIndex
3045  03b5 48            	sll	a
3046  03b6 b7fc          	ld	_parametersSaveAll$L-4,a
3047  03b8 b6ff          	ld	a,_parametersSaveAll$L-1
3048  03ba ae0a          	ld	x,#10
3049  03bc 42            	mul	x,a
3050  03bd bbfc          	add	a,_parametersSaveAll$L-4
3051  03bf 2401          	jrnc	L621
3052  03c1 5c            	inc	x
3053  03c2               L621:
3054  03c2 ab02          	add	a,#low(L147_mc_arwoParameters+1)
3055  03c4 88            	push	a
3056  03c5 9f            	ld	a,x
3057  03c6 a902          	adc	a,#high(L147_mc_arwoParameters+1)
3058  03c8 97            	ld	x,a
3059  03c9 84            	pop	a
3060  03ca bf00          	ld	c_x,x
3061  03cc 97            	ld	x,a
3062  03cd bf01          	ld	c_x+1,x
3063  03cf 92c600        	ld	a,[c_x.w]
3064  03d2 cd0000        	call	_writeEeprom
3066  03d5               L7241:
3067                     ; 286 	while(byIndex-->0)
3069  03d5 b6ff          	ld	a,_parametersSaveAll$L-1
3070  03d7 3aff          	dec	_parametersSaveAll$L-1
3071  03d9 4d            	tnz	a
3072  03da 2690          	jrne	L3241
3073                     ; 294 }
3076  03dc 81            	ret
3111                     ; 298 BYTE * parametersGetLabel(BYTE a_byParameterIndex)
3111                     ; 299 {
3112                     	switch	.text
3114                     	xref.b	_parametersGetLabel$L
3115  03dd               _parametersGetLabel:
3117  03dd b700          	ld	_parametersGetLabel$L,a
3119                     ; 300 	if (a_byParameterIndex<PARAMETER_SETUP_INITIAL_INDEX)
3121  03df a113          	cp	a,#19
3122  03e1 2403          	jruge	L3541
3123                     ; 302 		return NULL;
3125  03e3 5f            	clr	x
3126  03e4 4f            	clr	a
3129  03e5 81            	ret
3130  03e6               L3541:
3131                     ; 306 		return labelSetupGet(a_byParameterIndex-PARAMETER_SETUP_INITIAL_INDEX);
3133  03e6 b600          	ld	a,_parametersGetLabel$L
3134  03e8 a013          	sub	a,#19
3135  03ea cd0000        	call	_labelSetupGet
3139  03ed 81            	ret
3173                     ; 312 BYTE parametersVisible(BYTE a_byParameterIndex)
3173                     ; 313 {
3174                     	switch	.text
3176                     	xref.b	_parametersVisible$L
3177  03ee               _parametersVisible:
3179  03ee b700          	ld	_parametersVisible$L,a
3181                     ; 314 	return _btst(m_arbyParameterVisibleFlag[a_byParameterIndex/8], a_byParameterIndex & 0b00000111);
3183  03f0 a407          	and	a,#7
3184  03f2 97            	ld	x,a
3185  03f3 a601          	ld	a,#1
3186  03f5 5d            	tnz	x
3187  03f6 2704          	jreq	L431
3188  03f8               L631:
3189  03f8 48            	sll	a
3190  03f9 5a            	dec	x
3191  03fa 26fc          	jrne	L631
3192  03fc               L431:
3193  03fc be00          	ld	x,_parametersVisible$L
3194  03fe 54            	srl	x
3195  03ff 54            	srl	x
3196  0400 54            	srl	x
3197  0401 d40000        	and	a,(_m_arbyParameterVisibleFlag,x)
3200  0404 81            	ret
3265                     	switch	.const
3266  01cd               L241:
3267  01cd 00000800      	dc.l	2048
3268  01d1               L441:
3269  01d1 00000400      	dc.l	1024
3270                     ; 318 BYTE parametersSaveJob(WORD a_woJob)
3270                     ; 319 {
3271                     	switch	.text
3273                     	xref.b	_parametersSaveJob$L
3274  0405               _parametersSaveJob:
3276  0405 b701          	ld	_parametersSaveJob$L+1,a
3277  0407 bf00          	ld	_parametersSaveJob$L,x
3279                     ; 321 	BYTE byIndex = PARAMETER_NUMBER;
3281  0409 a62e          	ld	a,#46
3282  040b b7fe          	ld	_parametersSaveJob$L-2,a
3283                     ; 330 	if (a_woJob<((32768/JOB_PARAMETERS)*2)) // <64KByte
3285  040d b601          	ld	a,_parametersSaveJob$L+1
3286  040f be00          	ld	x,_parametersSaveJob$L
3287  0411 cd0000        	call	c_uitol
3289  0414 aecd          	ld	x,#high(L241)
3290  0416 bf00          	ld	c_x,x
3291  0418 aecd          	ld	x,#low(L241)
3292  041a cd0000        	call	c_xlcmp
3294  041d 2b03          	jrmi	L651
3295  041f cc04cb        	jp	L7251
3296  0422               L651:
3297                     ; 332 		parametersSet(PARAM_JOB, a_woJob);		
3299  0422 be00          	ld	x,_parametersSaveJob$L
3300  0424 bf01          	ld	_parametersSet$L+1,x
3301  0426 b601          	ld	a,_parametersSaveJob$L+1
3302  0428 b702          	ld	_parametersSet$L+2,a
3303  042a 4f            	clr	a
3304  042b cd0265        	call	_parametersSet
3307  042e 202e          	jra	L3351
3308  0430               L1351:
3309                     ; 335 			byJobIndex = mc_arwoParameters[byIndex][PARAM_IDX_JOB];
3311  0430 b6fe          	ld	a,_parametersSaveJob$L-2
3312  0432 ae0a          	ld	x,#10
3313  0434 42            	mul	x,a
3314  0435 ab08          	add	a,#low(L147_mc_arwoParameters+7)
3315  0437 88            	push	a
3316  0438 9f            	ld	a,x
3317  0439 a908          	adc	a,#high(L147_mc_arwoParameters+7)
3318  043b 97            	ld	x,a
3319  043c 84            	pop	a
3320  043d bf00          	ld	c_x,x
3321  043f 97            	ld	x,a
3322  0440 bf01          	ld	c_x+1,x
3323  0442 92c600        	ld	a,[c_x.w]
3324  0445 b7ff          	ld	_parametersSaveJob$L-1,a
3325                     ; 336 			if (byJobIndex != JOB_NONE)
3327  0447 b6ff          	ld	a,_parametersSaveJob$L-1
3328  0449 a1ff          	cp	a,#255
3329  044b 2711          	jreq	L3351
3330                     ; 338 				arwoJobParameters[byJobIndex] = 	parametersGetValue(byIndex);
3332  044d b6fe          	ld	a,_parametersSaveJob$L-2
3333  044f cd0196        	call	_parametersGetValue
3335  0452 90beff        	ld	y,_parametersSaveJob$L-1
3336  0455 9058          	sll	y
3337  0457 90e7bf        	ld	(_parametersSaveJob$L-65,y),a
3338  045a 9f            	ld	a,x
3339  045b 90e7be        	ld	(_parametersSaveJob$L-66,y),a
3340  045e               L3351:
3341                     ; 333 		while(byIndex-->0)
3343  045e b6fe          	ld	a,_parametersSaveJob$L-2
3344  0460 3afe          	dec	_parametersSaveJob$L-2
3345  0462 4d            	tnz	a
3346  0463 26cb          	jrne	L1351
3347                     ; 342 		if (a_woJob<(32768/JOB_PARAMETERS)) // <32KByte
3349  0465 b601          	ld	a,_parametersSaveJob$L+1
3350  0467 be00          	ld	x,_parametersSaveJob$L
3351  0469 cd0000        	call	c_uitol
3353  046c aed1          	ld	x,#high(L441)
3354  046e bf00          	ld	c_x,x
3355  0470 aed1          	ld	x,#low(L441)
3356  0472 cd0000        	call	c_xlcmp
3358  0475 2a29          	jrpl	L1451
3359                     ; 344 			writeEeprom(EEPROM_ADR_00,(WORD) (a_woJob*JOB_PARAMETERS*2), JOB_PARAMETERS*2, (BYTE *) arwoJobParameters);
3361  0477 aebe          	ld	x,#high(_parametersSaveJob$L-66)
3362  0479 bf05          	ld	_writeEeprom$L+5,x
3363  047b a6be          	ld	a,#low(_parametersSaveJob$L-66)
3364  047d b706          	ld	_writeEeprom$L+6,a
3365  047f a640          	ld	a,#64
3366  0481 b704          	ld	_writeEeprom$L+4,a
3367  0483 3f03          	clr	_writeEeprom$L+3
3368  0485 b601          	ld	a,_parametersSaveJob$L+1
3369  0487 be00          	ld	x,_parametersSaveJob$L
3370  0489 90ae06        	ld	y,#6
3371  048c 905d          	tnz	y
3372  048e 2706          	jreq	L641
3373  0490               L051:
3374  0490 48            	sll	a
3375  0491 59            	rlc	x
3376  0492 905a          	dec	y
3377  0494 26fa          	jrne	L051
3378  0496               L641:
3379  0496 b702          	ld	_writeEeprom$L+2,a
3380  0498 bf01          	ld	_writeEeprom$L+1,x
3381  049a 4f            	clr	a
3382  049b cd0000        	call	_writeEeprom
3385  049e 2028          	jra	L3451
3386  04a0               L1451:
3387                     ; 348 			writeEeprom(EEPROM_ADR_01,(WORD) (a_woJob*JOB_PARAMETERS*2), JOB_PARAMETERS*2, (BYTE *) arwoJobParameters);
3389  04a0 aebe          	ld	x,#high(_parametersSaveJob$L-66)
3390  04a2 bf05          	ld	_writeEeprom$L+5,x
3391  04a4 a6be          	ld	a,#low(_parametersSaveJob$L-66)
3392  04a6 b706          	ld	_writeEeprom$L+6,a
3393  04a8 a640          	ld	a,#64
3394  04aa b704          	ld	_writeEeprom$L+4,a
3395  04ac 3f03          	clr	_writeEeprom$L+3
3396  04ae b601          	ld	a,_parametersSaveJob$L+1
3397  04b0 be00          	ld	x,_parametersSaveJob$L
3398  04b2 90ae06        	ld	y,#6
3399  04b5 905d          	tnz	y
3400  04b7 2706          	jreq	L251
3401  04b9               L451:
3402  04b9 48            	sll	a
3403  04ba 59            	rlc	x
3404  04bb 905a          	dec	y
3405  04bd 26fa          	jrne	L451
3406  04bf               L251:
3407  04bf b702          	ld	_writeEeprom$L+2,a
3408  04c1 bf01          	ld	_writeEeprom$L+1,x
3409  04c3 a601          	ld	a,#1
3410  04c5 cd0000        	call	_writeEeprom
3412  04c8               L3451:
3413                     ; 351 		return true;
3415  04c8 a601          	ld	a,#1
3418  04ca 81            	ret
3419  04cb               L7251:
3420                     ; 355 		return false;
3422  04cb 4f            	clr	a
3425  04cc 81            	ret
3489                     ; 360 BYTE parametersLoadJob(WORD a_woJob)
3489                     ; 361 {
3490                     	switch	.text
3492                     	xref.b	_parametersLoadJob$L
3493  04cd               _parametersLoadJob:
3495  04cd b701          	ld	_parametersLoadJob$L+1,a
3496  04cf bf00          	ld	_parametersLoadJob$L,x
3498                     ; 363 	BYTE byIndex = PARAMETER_NUMBER;
3500  04d1 a62e          	ld	a,#46
3501  04d3 b7fe          	ld	_parametersLoadJob$L-2,a
3502                     ; 372 	if (a_woJob<((32768/JOB_PARAMETERS)*2)) // <64KByte
3504  04d5 b601          	ld	a,_parametersLoadJob$L+1
3505  04d7 be00          	ld	x,_parametersLoadJob$L
3506  04d9 cd0000        	call	c_uitol
3508  04dc aecd          	ld	x,#high(L241)
3509  04de bf00          	ld	c_x,x
3510  04e0 aecd          	ld	x,#low(L241)
3511  04e2 cd0000        	call	c_xlcmp
3513  04e5 2b03          	jrmi	L471
3514  04e7 cc0592        	jp	L1061
3515  04ea               L471:
3516                     ; 374 		if (a_woJob<(32768/JOB_PARAMETERS)) // <32KByte
3518  04ea b601          	ld	a,_parametersLoadJob$L+1
3519  04ec be00          	ld	x,_parametersLoadJob$L
3520  04ee cd0000        	call	c_uitol
3522  04f1 aed1          	ld	x,#high(L441)
3523  04f3 bf00          	ld	c_x,x
3524  04f5 aed1          	ld	x,#low(L441)
3525  04f7 cd0000        	call	c_xlcmp
3527  04fa 2a29          	jrpl	L3061
3528                     ; 376 			readEeprom(EEPROM_ADR_00,(WORD) (a_woJob*JOB_PARAMETERS*2), JOB_PARAMETERS*2, (BYTE *) arwoJobParameters);
3530  04fc aebe          	ld	x,#high(_parametersLoadJob$L-66)
3531  04fe bf05          	ld	_readEeprom$L+5,x
3532  0500 a6be          	ld	a,#low(_parametersLoadJob$L-66)
3533  0502 b706          	ld	_readEeprom$L+6,a
3534  0504 a640          	ld	a,#64
3535  0506 b704          	ld	_readEeprom$L+4,a
3536  0508 3f03          	clr	_readEeprom$L+3
3537  050a b601          	ld	a,_parametersLoadJob$L+1
3538  050c be00          	ld	x,_parametersLoadJob$L
3539  050e 90ae06        	ld	y,#6
3540  0511 905d          	tnz	y
3541  0513 2706          	jreq	L261
3542  0515               L461:
3543  0515 48            	sll	a
3544  0516 59            	rlc	x
3545  0517 905a          	dec	y
3546  0519 26fa          	jrne	L461
3547  051b               L261:
3548  051b b702          	ld	_readEeprom$L+2,a
3549  051d bf01          	ld	_readEeprom$L+1,x
3550  051f 4f            	clr	a
3551  0520 cd0000        	call	_readEeprom
3554  0523 2028          	jra	L5061
3555  0525               L3061:
3556                     ; 380 			readEeprom(EEPROM_ADR_01,(WORD) (a_woJob*JOB_PARAMETERS*2), JOB_PARAMETERS*2, (BYTE *) arwoJobParameters);
3558  0525 aebe          	ld	x,#high(_parametersLoadJob$L-66)
3559  0527 bf05          	ld	_readEeprom$L+5,x
3560  0529 a6be          	ld	a,#low(_parametersLoadJob$L-66)
3561  052b b706          	ld	_readEeprom$L+6,a
3562  052d a640          	ld	a,#64
3563  052f b704          	ld	_readEeprom$L+4,a
3564  0531 3f03          	clr	_readEeprom$L+3
3565  0533 b601          	ld	a,_parametersLoadJob$L+1
3566  0535 be00          	ld	x,_parametersLoadJob$L
3567  0537 90ae06        	ld	y,#6
3568  053a 905d          	tnz	y
3569  053c 2706          	jreq	L661
3570  053e               L071:
3571  053e 48            	sll	a
3572  053f 59            	rlc	x
3573  0540 905a          	dec	y
3574  0542 26fa          	jrne	L071
3575  0544               L661:
3576  0544 b702          	ld	_readEeprom$L+2,a
3577  0546 bf01          	ld	_readEeprom$L+1,x
3578  0548 a601          	ld	a,#1
3579  054a cd0000        	call	_readEeprom
3581  054d               L5061:
3582                     ; 382 		if(a_woJob != arwoJobParameters[JOB_PARAM_JOB])
3584  054d b601          	ld	a,_parametersLoadJob$L+1
3585  054f b1bf          	cp	a,_parametersLoadJob$L-65
3586  0551 2604          	jrne	L271
3587  0553 be00          	ld	x,_parametersLoadJob$L
3588  0555 b3be          	cp	x,_parametersLoadJob$L-66
3589  0557               L271:
3590  0557 272f          	jreq	L3161
3591                     ; 384 			return false;
3593  0559 4f            	clr	a
3596  055a 81            	ret
3597  055b               L1161:
3598                     ; 389 			byJobIndex = mc_arwoParameters[byIndex][PARAM_IDX_JOB];
3600  055b b6fe          	ld	a,_parametersLoadJob$L-2
3601  055d ae0a          	ld	x,#10
3602  055f 42            	mul	x,a
3603  0560 ab08          	add	a,#low(L147_mc_arwoParameters+7)
3604  0562 88            	push	a
3605  0563 9f            	ld	a,x
3606  0564 a908          	adc	a,#high(L147_mc_arwoParameters+7)
3607  0566 97            	ld	x,a
3608  0567 84            	pop	a
3609  0568 bf00          	ld	c_x,x
3610  056a 97            	ld	x,a
3611  056b bf01          	ld	c_x+1,x
3612  056d 92c600        	ld	a,[c_x.w]
3613  0570 b7ff          	ld	_parametersLoadJob$L-1,a
3614                     ; 390 			if (byJobIndex != JOB_NONE)
3616  0572 b6ff          	ld	a,_parametersLoadJob$L-1
3617  0574 a1ff          	cp	a,#255
3618  0576 2710          	jreq	L3161
3619                     ; 392 				parametersSet(byIndex,arwoJobParameters[byJobIndex]);
3621  0578 beff          	ld	x,_parametersLoadJob$L-1
3622  057a 58            	sll	x
3623  057b e6be          	ld	a,(_parametersLoadJob$L-66,x)
3624  057d b701          	ld	_parametersSet$L+1,a
3625  057f e6bf          	ld	a,(_parametersLoadJob$L-65,x)
3626  0581 b702          	ld	_parametersSet$L+2,a
3627  0583 b6fe          	ld	a,_parametersLoadJob$L-2
3628  0585 cd0265        	call	_parametersSet
3630  0588               L3161:
3631                     ; 387 		while(byIndex-->0)
3633  0588 b6fe          	ld	a,_parametersLoadJob$L-2
3634  058a 3afe          	dec	_parametersLoadJob$L-2
3635  058c 4d            	tnz	a
3636  058d 26cc          	jrne	L1161
3637                     ; 396 		return true;
3639  058f a601          	ld	a,#1
3642  0591 81            	ret
3643  0592               L1061:
3644                     ; 400 		return false;
3646  0592 4f            	clr	a
3649  0593 81            	ret
3724                     	xdef	_parametersSetForced
3725                     	xdef	_parametersCheckBound
3726                     	xdef	_parametersVisibleFlagSet
3727                     	xdef	_m_byEepromAppIndex
3728                     	xdef	_m_byParamFirstTime
3729                     	switch	.bss
3730  0000               _m_arbyParameterVisibleFlag:
3731  0000 000000000000  	ds.b	6
3732                     	xdef	_m_arbyParameterVisibleFlag
3733  0006               _m_arbyParameterChangedFlag:
3734  0006 000000000000  	ds.b	6
3735                     	xdef	_m_arbyParameterChangedFlag
3736  000c               _m_arwoParameters:
3737  000c 000000000000  	ds.b	92
3738                     	xdef	_m_arwoParameters
3739                     	xdef	_parametersGetSerialNumber
3740                     	xdef	_parametersInitVisibleFlagsSimple
3741                     	xdef	_parametersInitVisibleFlags
3742                     	xdef	_parametersVisible
3743                     	xdef	_parametersGetLabel
3744                     	xdef	_parametersIsChanged
3745                     	xdef	_parametersForceChangedFlag
3746                     	xdef	_parametersChangedFlagReset
3747                     	xdef	_parametersSet
3748                     	xdef	_parametersGetValue
3749                     	xdef	_parametersGet
3750                     	xdef	_parametersSaveAll
3751                     	xdef	_parametersLoadAll
3752                     	xdef	_parametersLoadJob
3753                     	xdef	_parametersSaveJob
3754                     	xdef	_parametersInit
3755                     	xref	_labelSetupGet
3756                     	xref	_readEeprom
3757                     	xref	_writeEeprom
3758                     	xref.b	c_x
3759                     	xref.b	c_y
3779                     	xref	c_xlcmp
3780                     	xref	c_uitol
3781                     	xref	c_putw
3782                     	xref	c_getwx
3783                     	xref.b	_parametersSetForced$L
3784                     	xref.b	_writeEeprom$L
3785                     	xref.b	_parametersCheckBound$L
3786                     	xref.b	_parametersGet$L
3787                     	xref.b	_parametersSet$L
3788                     	xref.b	_readEeprom$L
3789                     	end
